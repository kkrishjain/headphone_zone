{% schema %}
  {
  "name": "Blog Video Widget",
  "class": "headphone-zone-blog-video-widget",
  "presets": [{"name":"Blog Video Widgets"}]
}
{% endschema %}

<div class="section section-blends section-full text-custom" style="--text-color: 255 255 255; padding-top:0px!important;padding-bottom:0px!important;">
  <div class="content-over-media aspect-video shadow-block rounded-lg  text-custom" style="--text-color: 255 255 255;">
    <video-media host="youtube">
      <div class="youtube-thumb" data-id="{{ article.metafields.hpz.youtube_video_id }}"></div>
    </video-media>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded",
    function () {
      let div, i, v = document.getElementsByClassName("youtube-thumb");
      for (i = 0; i < v.length; i++) {
        div = document.createElement("div");
        div.setAttribute("data-id", v[i].dataset.id);
        div.innerHTML = ytThumbnail(v[i].dataset.id);
        div.onclick = ytIframe;
        v[i].appendChild(div);
      }
    }
  );
  function ytThumbnail(id) {
    let thumb = '<img src="{{ article.metafields.hpz.youtube_image_thumbnail }}&amp;width=1280">', play = '<div class="play"></div>';
    return thumb.replace("ID", id) + play;
  }
  function ytIframe() {
    let iframe = document.createElement("iframe");
    iframe.setAttribute("src", `https://www.youtube.com/embed/${this.dataset.id}?autoplay=1&modestbranding=1&mute=1&playsinline=1`);
    iframe.setAttribute("frameborder", "0");
    iframe.setAttribute("allowfullscreen", "1");
    this.parentNode.replaceChild(iframe, this);
  }
</script>

{% stylesheet %}
  .youtube-thumb {
    height: 0;
    max-width: 100%;
    overflow: hidden;
    background: #000;
    position: relative;
    padding-bottom: 56.23%;
  }

  .youtube-thumb iframe,
  .youtube-thumb object,
  .youtube-thumb embed {
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 100;
    position: absolute;
    background: transparent;
  }

  .youtube-thumb img {
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: auto;
    border: none;
    display: block;
    cursor: pointer;
    max-width: 100%;
    position: absolute;
    transition: 0.4s all;
    -moz-transition: 0.4s all;
    -webkit-transition: 0.4s all;
    margin: auto 0px auto 0px!important;
  }
  @media screen and (max-width: 740px) {
    .youtube-thumb img {
      margin: auto 0px auto 0px!important;
    }
  }
  .youtube-thumb img:hover {
    -webkit-filter: brightness(75%);
  }
  .youtube-thumb .play {
    top: 50%;
    left: 50%;
    width: 72px;
    height: 72px;
    cursor: pointer;
    margin-top: -36px;
    margin-left: -36px;
    position: absolute;
    background: url("https://cdn.shopify.com/s/files/1/0153/8863/files/YouTube_play_button_icon__2013_2017.svg?v=1678794686") no-repeat;
  }
{% endstylesheet %}